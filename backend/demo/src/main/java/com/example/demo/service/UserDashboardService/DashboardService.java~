package com.example.demo.service.UserDashboardService;


// service
// â””â”€â”€ ğŸ“ UserDashboardServce
//      â”œâ”€â”€ DashboardService.java            // Quáº£n lÃ½ xá»­ lÃ½ chÃ­nh (giao tiáº¿p vá»›i controller)
//      â”œâ”€â”€ DashboardUpdateService.java      // Xá»­ lÃ½ cáº­p nháº­t dashboard
//      â”œâ”€â”€ DashboardMetricsService.java     // TÃ­nh toÃ¡n sá»‘ liá»‡u (basic, time-based)
//      â”œâ”€â”€ MilestoneService.java            // TÃ­nh má»‘c pháº§n thÆ°á»Ÿng tiáº¿p theo
//      â””â”€â”€ TrackingHistoryService.java      // Tráº£ vá» lá»‹ch sá»­ tracking tá»«ng ngÃ y


import com.example.demo.DTO.DashboardDTO;
import lombok.RequiredArgsConstructor;
import org.springframework.http.ResponseEntity;
import org.springframework.stereotype.Service;

import java.util.List;
import java.util.Map;

@Service
@RequiredArgsConstructor
public class DashboardService {

        private final DashboardUpdateService dashboardUpdateService;
        private final TrackingHistoryService trackingHistoryService;

        public ResponseEntity<DashboardDTO> getDashboard(Integer userId) {
            return dashboardUpdateService.getOrUpdateDashboard(userId);
        }

        public ResponseEntity<List<Map<String, Object>>> getTrackingHistory(Integer userId) {
            return trackingHistoryService.getHistory(userId);
        }

        public void handleDataUpdatedEvent(Integer userId) {
            dashboardUpdateService.forceUpdateDashboard(userId);
        }
}

